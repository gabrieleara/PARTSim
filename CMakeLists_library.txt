# set(LIBRARY_NAME rtlib)
# # TODO: SHARED or STATIC?
# set(LIBRARY_TYPE SHARED)
# set(LIBRARY_VERSION 3.0)
# set(LIBRARY_SOVERSION 3)
# set(LIBRARY_DEPENDENCIES metasim)
# set(LIBRARY_INCLUDEDIR include)
# set(SOURCE_FILES ...)

# Must use GNUInstallDirs to install libraries into correct
# locations on all platforms.
include(GNUInstallDirs)

################## LIBRARY SETTINGS ###################

add_library(${LIBRARY_NAME} ${LIBRARY_TYPE}
    ${SOURCE_FILES}
)

# Setting the version of the shared library
set_target_properties(${LIBRARY_NAME} PROPERTIES
    VERSION ${LIBRARY_VERSION}
    SOVERSION ${LIBRARY_SOVERSION}
)

# Include paths for this library. PUBLIC headers are used both to compile
# this library and will be added to consumers' build paths when built
# using CMake.
# In this case, "include" directory will be exported, while "private"
# directory will not and will only be used to build the library itself.
target_include_directories(${LIBRARY_NAME}
    PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/${LIBRARY_INCLUDEDIR}
)

target_link_libraries(${LIBRARY_NAME}
    PUBLIC ${LIBRARY_DEPENDENCIES}
)

# # PThread is required to link this library
# target_link_libraries(${LIBRARY_NAME} PRIVATE pthread)

# # Install directory changes depending on build mode
# if (CMAKE_BUILD_TYPE MATCHES "^[Dd]ebug")
#     # During debug, the library will be installed into a local directory
#     set(CMAKE_INSTALL_PREFIX ${CMAKE_CURRENT_BINARY_DIR}/_install CACHE PATH "" FORCE)
# else ()
#     # This will install in /usr/lib and /usr/include
#     set(CMAKE_INSTALL_PREFIX /usr CACHE PATH "" FORCE)
# endif ()

# # Specifying what to export when installing (GNUInstallDirs required)
# install(TARGETS forb
#         EXPORT libforb-config
#         ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
#         LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
#         RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}) # Windows specific

# # Actually to export the "include" directory we need to copy manually files
# install(DIRECTORY include/ DESTINATION ${CMAKE_INSTALL_INCLUDEDIR})
